NOTES 
#####################################################################################################


########### Making queries in Django ################################################################

Making queries in django- https://docs.djangoproject.com/en/5.2/topics/db/queries/
Retrieving objects^^

QuerySet- collection of objects from db. can have 0 or more filters to narrow down query results based on given parameters

"You get a QuerySet by using your model's Manager. Each model has at least one Manager, and it's called objects by default. 
Access it directly via the model class, like so:

    >>> Blog.objects
    <django.db.models.manager.Manager object at ...>
    >>> b = Blog(name='Foo', tagline='Bar')
    >>> b.objects
    Traceback:
        ...
    AttributeError: "Manager isn't accessible via Blog instances."
"

the Managers accessible from model classes only and not instances to enforce separation between “table-level” & “record-level” operations.

    Model.objects.all()
    - descibed all objects in db table. to specify though:

    Model.objects.filter(**kwargs)
    Model.objects.exclude(**kwargs)

    Entry.objects.filter(pub_date__year=2006)



useful sections in making queries section- Chaining filters, Retrieving a single object with get(), Limiting QuerySets, plus more!!

########### Limiting QuerySets ###########

For example, this returns the first 5 objects (LIMIT 5):
>>> Entry.objects.all()[:5]

This returns the sixth through tenth objects (OFFSET 5 LIMIT 5):
>>> Entry.objects.all()[5:10]

>>> Model.objects.last()
- Returns the last object in the QuerySet, or None if empty.

>>> Model.objects.order_by(x).last()

>>> Recipes.objects.all()[:25] 
- gets all fields from first 25 from Recipes model

>>> Model.objects.order_by('id')
- orders the objects with id in ascending order

>>> Model.objects.order_by('-id')
- orders object by '-id', so in descending order

>>> Model.objects.order_by('-id')[:5]
- order with id in descending, then gives first 5
- same as:
    Model.objects.order_by('id')[-5:]
- this one orders in asecnding order, then takes last 5
- but apparently first way is considered cleaner



########### Handling long text / tags for Recipe card ###############################################

########### For the description: ###########
To limit characters and add ellipsis:
<p class="card-text">{{ recipe.description|truncatechars:100 }}</p>


This will show the first 100 characters followed by ….


########### For the tags ###########
If recipe.tags is a string:
<p class="card-text"><small class="text-muted">{{ recipe.tags|truncatechars:50 }}</small></p>


If recipe.tags is a list (recommended), you can iterate and limit:
{% for tag in recipe.tags.all|slice:":3" %}
  <a href="{% url 'recipes_by_tag' tag.slug %}" class="badge bg-secondary">{{ tag.name }}</a>
{% endfor %}
{% if recipe.tags.count > 3 %}…{% endif %}

This shows first 3 tags and adds an ellipsis if there are more.





########### BOOTSTRAP SPACING AND PADDING ###########################################################

The classes are named using the format {property}{sides}-{size} for xs and {property}{sides}-{breakpoint}-{size} for sm, md, lg, and xl.

Where property is one of:

m - for classes that set margin
p - for classes that set padding
Where sides is one of:

t - for classes that set margin-top or padding-top
b - for classes that set margin-bottom or padding-bottom
l - for classes that set margin-left or padding-left
r - for classes that set margin-right or padding-right
x - for classes that set both *-left and *-right
y - for classes that set both *-top and *-bottom
blank - for classes that set a margin or padding on all 4 sides of the element
Where size is one of:

0 - for classes that eliminate the margin or padding by setting it to 0
1 - (by default) for classes that set the margin or padding to $spacer * .25
2 - (by default) for classes that set the margin or padding to $spacer * .5
3 - (by default) for classes that set the margin or padding to $spacer
4 - (by default) for classes that set the margin or padding to $spacer * 1.5
5 - (by default) for classes that set the margin or padding to $spacer * 3
auto - for classes that set the margin to auto
(You can add more sizes by adding entries to the $spacers Sass map variable.)



########### MANY-T0-MANY-FIELDS IN DJANGO ###########################################################
Each row in model A can relate to many rows in model B
Each row in model B can relate to many rows in model A

E.g. each Recipe can have many tags and each tag can be associated with many recipes

So, under the hood, Django creates a separate table to store the relationships, e.g.:

recipe_id	tag_id
1	        5
1	        8
2	        5


Feature	Notes
Assignment during create()      ❌ Not allowed; instance must exist first
Manager methods	                .add(), .set(), .remove(), .clear()
Accessing tags	                recipe.tags.all() → QuerySet of tags
Querying	                    Recipe.objects.filter(tags__name='italian') → recipes with a given tag

In most cases you do NOT need a separate tags model because Django’s ManyToManyField or django-taggit 
already handles it for you


########### Many to 'not many' ish thing? ###########
How to make the number of instructions or ingredients dynamic?
This is some kind of relationship idk- each recipe can have many ingredients and instructions but each 
instruction not associated with many recipes because they are all unique user inputs, even if they say the 
same thing (multiple recipes calling for 250g flour, for example)

first of all, for ingedients, can just have user write in the unit of measurement per ingredient no?




########### RANDOM.CHOICES() ###########################################################
random.choices() signature:
        random.choices(population, weights=None, *, cum_weights=None, k=1)
        
        population              ->   the list you want to sample from
        weights / cum_weights   ->   optional weighting, use one or other not both
        k                       ->   number of elements to pick (default 1)



##### IMAGES #####################
ContentFile(img_data) wraps the raw bytes of the image so Django can treat it like a file.
Then recipe.image.save() stores it in MEDIA_ROOT and updates the database path.



<!--<img src="{% static 'recipes/images/no_img.png' %}" class="card-img-top rounded-top-image" alt="...">-->