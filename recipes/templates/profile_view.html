{% extends 'base_content.html' %}
{% block content %}
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-6">

      {% if profile_user.profile_image %}
        <img src="{{ profile_user.profile_image.url }}" 
            alt="Profile Picture"
            class="rounded-circle img-fluid d-block mx-auto mb-3 shadow"
            style="width: 150px; height: 150px; object-fit: cover;">
      {% else %}
        <img src="{{ profile_user.gravatar_url }}" 
            alt="Profile Picture"
            class="rounded-circle img-fluid d-block mx-auto mb-3 shadow"
            style="width: 150px; height: 150px; object-fit: cover;">
      {% endif %}

      <div class="card p-4 shadow-sm mt-4">
        <h2 class="text-center mb-3">{{ profile_user.full_name }}</h2>

        <p><strong>Username:</strong> {{ profile_user.username }}</p>
        <p><strong>Email:</strong> {{ profile_user.email }}</p>
        <p><strong>Member since:</strong> {{ profile_user.date_joined|date:"F j, Y" }}</p>
        <p><strong>Total Recipes:</strong>{{ recipe_count }}</p>
      </div>

      {% if request.user == profile_user%}
      <div class="mt-4 text-center">
        <a href="{% url 'profile' %}" class="btn btn-primary me-2">Edit Profile</a>
        <a href="{% url 'create_recipe' %}" class="btn btn-primary me-2">Create Recipe</a>
      </div>
      {% endif %}
      
      <hr class="my-4">
      {% if user_recipes %}
        {% for recipe in user_recipes %}
        <div class="mb-3 p-3 border rounder">
          <h4>{{ recipe.title }}</h4>
          <p class="text-muted">
            {{ recipe.description|truncatewords:20}}
          </p>
          {% if recipe.image %}
                <img src="{{ recipe.image.url }}"
                     class="img-fluid rounded mb-2"
                     style="max-height: 150px;">
          {% endif %}

          <p><strong>Prep Time:</strong>{{ recipe.prep_time }} mins</p>
          <p><strong>Servings:</strong>{{ recipe.servings }}</p>
          
          <a href="#" class="btn btn-sm btn-outline-primary">
                View Recipe
              </a>
            </div>
          {% endfor %}
        {% else %}
          <p class="text-muted text-center">You havenâ€™t created any recipes yet.</p>
        {% endif %}
      </div>

    </div>
  </div>
</div>
{% endblock %}
