{% extends 'base_content.html' %}
{% block content %}

<div class="container my-5">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="m-0">
            My Saved Recipes
        </h3>
    </div>

    {% if saved_recipes %}

    <div class="list-group">
        {% for recipe in saved_recipes %}
        <div class="list-group-item py-3 mb-3 rounded shadow-sm">
            <div class="d-flex align-items-center">

                {% if recipe.image %}
                <img src="{{ recipe.image.url }}" class="rounded me-3"
                    style="width: 90px; height: 90px; object-fit: cover;">
                {% endif %}

                <div class="flex-grow-1">
                    <h5 class="mb-1">{{ recipe.title }}</h5>
                    <p class="text-muted mb-1">{{ recipe.description|truncatewords:20 }}</p>
                    <div class="small text-muted">
                        Prep: {{ recipe.prep_time }} mins â€¢ Servings: {{ recipe.servings }}
                    </div>
                </div>

                <div class="ms-3 d-flex align-items-center">
                    <a href="{% url 'display_recipe' recipe.pk %}" class="link-secondary me-3">
                        <i class="bi bi-eye-fill fs-5"></i>
                    </a>

                    <form action="{% url 'save_unsave_recipe' recipe.pk %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="current_page" value="{{ request.get_full_path }}">
                        <button type="submit" class="btn btn-link p-0 m-0">
                            <i class="bi bi-bookmark-fill fs-5 text-secondary"></i>
                        </button>
                    </form>
                </div>

            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="list-group-item py-5 mb-3 rounded shadow-sm text-center text-muted">
        No saved recipes yet.
    </div>
    {% endif %}


</div>

{% endblock %}